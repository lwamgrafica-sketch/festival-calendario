<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Eventi</title>
  <style>
    body { margin:0; font-family: sans-serif; }
    section.day {
      min-height: 100vh;
      border-bottom: 1px solid #000;
      padding: 40px 20px;
    }
    section.day h3 { margin: 0 0 20px; }
  </style>
</head>
<body>
  <section class="day" data-date="14 settembre 2025">
    <h3>14 settembre 2025</h3>
    <p>Evento A</p>
  </section>
  <section class="day" data-date="15 settembre 2025">
    <h3>15 settembre 2025</h3>
    <p>Evento B</p>
  </section>
  <section class="day" data-date="16 settembre 2025">
    <h3>16 settembre 2025</h3>
    <p>Evento C</p>
  </section>

  <script>
    const sections = document.querySelectorAll("section.day");

    function updateDate() {
      let current = sections[0];
      sections.forEach(sec => {
        const rect = sec.getBoundingClientRect();
        if (rect.top <= 100 && rect.bottom >= 100) {
          current = sec;
        }
      });
      // invia al parent (Cargo) la data visibile
      window.parent.postMessage({ type: "dateChange", date: current.dataset.date }, "*");
    }

    document.addEventListener("scroll", updateDate);
    updateDate();
  </script>
</body>
</html>
